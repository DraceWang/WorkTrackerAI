# WorkTracker AI - 使用指南

## 📦 快速开始

### 1. 环境要求

- **操作系统**: Windows 10/11
- **Go 版本**: 1.21 或更高
- **网络连接**: 需要访问 AI API（OpenAI/Claude 等）

### 2. 安装 Go

如果还未安装 Go，请按照以下步骤：

1. 访问 [Go 官网](https://go.dev/dl/)
2. 下载 Windows 安装包（推荐 go1.21.x 或更高版本）
3. 运行安装程序，按照提示完成安装
4. 打开命令提示符，输入 `go version` 验证安装

### 3. 构建项目

双击运行 `build.bat` 脚本，它会自动：
- 检查 Go 环境
- 下载所需依赖
- 编译生成 `WorkTrackerAI.exe`

```bash
# 或者在命令行中运行:
build.bat
```

### 4. 首次配置

1. **双击启动** `WorkTrackerAI.exe`
2. 系统托盘会出现 WorkTrackerAI 图标
3. 右键托盘图标，选择 **"打开控制面板"**
4. 浏览器会自动打开 `http://localhost:9527`

### 5. 配置 AI 模型

在 Web 界面的 **"配置设置"** 部分：

1. **AI 提供商**: 选择你要使用的服务

   **国际服务:**
   - **OpenAI**: `gpt-4o` 或 `gpt-4-vision-preview`（需科学上网）

   **国产服务（推荐）:**
   - **DeepSeek**: `deepseek-chat` 或 `deepseek-vl`（性价比极高）
   - **通义千问**: `qwen-vl-plus` 或 `qwen-vl-max`（阿里云，稳定）
   - **豆包**: `doubao-vision-pro`（字节跳动，响应快）

2. **API 密钥**: 输入你的 API Key
   - OpenAI: 从 [OpenAI Platform](https://platform.openai.com/api-keys) 获取
   - DeepSeek: 从 [DeepSeek 平台](https://platform.deepseek.com/) 获取
   - 通义千问: 从 [阿里云 DashScope](https://dashscope.aliyun.com/) 获取
   - 豆包: 从 [火山引擎](https://www.volcengine.com/product/doubao) 获取

3. **模型名称**: 填写对应的模型标识符

4. 点击 **"保存配置"**

### 6. 开始使用

#### 方式一：通过 Web 界面控制

1. 在 Web 界面点击 **"▶️ 开始截屏"** 按钮
2. 程序会按照配置的间隔自动截图
3. 每隔一定时间（默认 60 分钟）自动进行 AI 分析
4. 在 **"今日工作总结"** 查看分析结果

#### 方式二：通过系统托盘控制

1. 右键点击托盘图标
2. 选择 **"▶️ 开始截屏"**
3. 系统会在后台自动工作

## ⚙️ 配置说明

### 截屏配置

- **截图间隔**: 2-5 秒推荐，根据需要调整
- **图片质量**: 45 为推荐值（1-100）
- **工作时间**: 设置每天的工作时间范围（例如 9:00-18:00）

### AI 分析配置

- **分析间隔**: 建议 30-60 分钟
- **数据保留**: 截图保留天数（默认 30 天）

## 🎯 功能特性

### 1. 自动截屏
- ✅ 按照配置的间隔自动截取屏幕
- [ ] 支持多显示器（可选择特定屏幕）
- ✅ 仅在工作时间内截图
- ✅ JPEG 压缩，节省存储空间

### 2. AI 智能分析
- ✅ 自动识别使用的应用程序
- ✅ 总结工作内容和活动类型
- ✅ 生成时间占比统计
- ✅ 支持多种 AI 模型

### 3. 数据管理
- ✅ SQLite 本地存储
- ✅ 自动清理过期数据
- ✅ 隐私保护，数据不上传

### 4. Web 界面
- ✅ 实时状态监控
- ✅ 配置在线修改
- ✅ 工作总结查看
- ✅ 响应式设计

## 🚀 高级功能

### 立即截图

点击 **"📸 立即截图"** 可以手动触发一次截图

### 立即分析

点击 **"🤖 立即分析"** 可以立即分析当天到目前位置所保存的截图，会清除之前的分析结果


## 📁 目录结构

```
WorkTrackerAI/
├── cmd/
│   └── worktracker/
│       └── main.go          # 主程序入口
├── internal/
│   ├── ai/                  # AI 分析模块
│   ├── capture/             # 截屏引擎
│   ├── config/              # 配置管理
│   ├── scheduler/           # 任务调度
│   ├── server/              # Web 服务器
│   ├── storage/             # 数据存储
│   └── tray/                # 系统托盘
├── pkg/
│   ├── models/              # 数据模型
│   └── utils/               # 工具函数
├── web/
│   ├── templates/           # HTML 模板
│   └── static/              # 静态资源
├── go.mod                   # Go 模块文件
├── build.bat                # 构建脚本
├── run.bat                  # 开发运行脚本
└── README.md                # 项目说明

C:\Users\%username%\AppData\Local\WorkTrackerAI\
├── data/                    # 数据目录
│   ├── config.json          # 配置文件
│   ├── worktracker.db       # SQLite 数据库
│   └── screenshots/         # 截图文件
```

## 🔧 开发模式

如果你想在开发模式下运行（无需编译）：

```go
go run cmd/worktracker/main.go
```

## 📊 数据查看

- **截图文件**: 保存在 `data/screenshots/YYYY-MM-DD/` 目录下
- **数据库**: `data/worktracker.db`（SQLite 格式）
- **配置文件**: `data/config.json`

## ❓ 常见问题

### Q: 截图不工作？
A: 检查以下几点：
1. 是否点击了"开始截屏"按钮
2. 当前时间是否在工作时间范围内
3. 查看托盘图标状态

### Q: AI 分析失败？
A: 可能的原因：
1. API 密钥未配置或错误
2. 网络连接问题
3. API 额度不足
4. 时间段内没有截图

### Q: 如何更换 AI 模型？
A: 在 Web 界面的配置部分更改，然后点击保存

### Q: 数据存储在哪里？
A: 所有数据都保存在项目根目录的 `data/` 文件夹中

### Q: 如何卸载？
A:
1. 通过托盘图标退出程序
2. 删除整个 WorkTracker 文件夹即可

## 🔒 隐私说明

- ✅ **本地存储**: 所有截图和数据都保存在本地
- ✅ **API 调用**: 仅在分析时发送截图到 AI 服务
- ✅ **无追踪**: 不收集任何使用数据
- ✅ **可控制**: 可随时停止或删除数据

## 📝 更新日志

### v0.7.0 (2025-11-13)
- ✨ 新增 DeepSeek AI 支持（国产，性价比高）
- ✨ 新增通义千问支持（阿里云）
- ✨ 新增豆包支持（字节跳动）
- 🔧 修复依赖版本问题，确保构建成功
- 🔧 默认端口改为 9527（原8080）
- 📚 更新所有文档和配置说明

### v0.8.0 (2024-11-13)
- ✨ 新增base url，给本地host使用
- ✅ 完整的截屏和 AI 分析功能
- ✅ Web 控制面板
- ✅ 系统托盘集成
- ✅ 完善的文档系统

### v0.9.9 (2024-11-14)
- ✨ 新增配置保存功能
- ✨ 新增测试连接获取AI模型功能
- ✅ 完成截屏和 AI 分析功能测试
- ✅ 图标修改完成

### v1.0.0 (2024-11-17)
- ✅ 修复系统托盘图标加载问题
- ✅ 删除不必要的过程文件
- ✅ 增加打包功能，方便非开发人员使用
### v1.0.0 (2024-11-18)

- ✅ 修复系统托盘图标加载问题
- ✅ 修复立即分析按钮对应的固定写死时区的问题
- ✅ 正在分析中的等待提示
- ✨ 新增今日小结的一天总览功能
- ✅ 今日小结改为一个工作内容一个点，修改AI提示词，输出格式为1.；2.；3.；

## 🆘 获取帮助

如果遇到问题：
1. 查看控制台输出（开发模式下）
2. 检查 `data/config.json` 配置是否正确
3. 确认 Go 版本 >= 1.21
4. 检查网络和 API 密钥

## 📄 许可证

MIT License - 可自由使用和修改
